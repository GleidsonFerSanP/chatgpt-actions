openapi: 3.1.0
info:
  title: Unified API for Calendar, Contacts, Email and File Management
  description: Combined OpenAPI schema for managing Google Calendar events, contacts, sending emails, and uploading files to S3.
  version: 1.0.1
servers:
  - url: https://fa1xmc5uj9.execute-api.us-east-1.amazonaws.com
    description: API Gateway endpoint for Lambda
paths:
  /calendar-create-event-agent-action:
    post:
      operationId: createGoogleCalendarEvent
      summary: Create an event
      description: Endpoint to create an event with specific attributes.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                summary:
                  type: string
                  description: A brief summary of the event.
                  example: Team Meeting
                description:
                  type: string
                  description: A detailed description of the event.
                  example: Discuss quarterly goals and progress.
                location:
                  type: string
                  description: The location of the event.
                  example: Conference Room A
                attendees:
                  type: string
                  description: A comma-separated list of attendees' emails.
                  example: john.doe@example.com, jane.doe@example.com
                startDateTime:
                  type: string
                  format: date-time
                  description: The start date and time of the event in ISO 8601 format.
                  example: 2024-12-30T10:00:00Z
                endDateTime:
                  type: string
                  format: date-time
                  description: The end date and time of the event in ISO 8601 format.
                  example: 2024-12-30T11:00:00Z
      responses:
        "201":
          description: Event created successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: The unique identifier of the created event.
                    example: 12345
  /calendar-delete-event-agent-action:
    delete:
      operationId: deleteGoogleCalendarEvent
      summary: Delete a Google Calendar Event
      description: Deletes a Google Calendar event using its unique ID.
      parameters:
        - in: query
          name: eventId
          required: true
          schema:
            type: string
          description: The unique identifier of the Google Calendar event to delete.
      responses:
        "200":
          description: Event deleted successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Event with ID your-event-id has been deleted.
        "400":
          description: Bad Request - Missing or invalid eventId parameter.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required parameter eventId
        "500":
          description: Internal Server Error - Failed to delete the event.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Failed to delete the event.
                  details:
                    type: string
                    example: Event not found or API error.
  /calendar-search-events-agent-action:
    get:
      operationId: searchGoogleCalendarEvent
      summary: Search Google Calendar Events
      description: Search for events in Google Calendar by summary, startDateTime, and endDateTime.
      parameters:
        - in: query
          name: summary
          schema:
            type: string
          required: true
          description: The keyword to search for in event summaries.
        - in: query
          name: startDateTime
          schema:
            type: string
            format: date-time
          required: true
          description: The start of the time range to search (ISO 8601 format).
        - in: query
          name: endDateTime
          schema:
            type: string
            format: date-time
          required: true
          description: The end of the time range to search (ISO 8601 format).
      responses:
        "200":
          description: A list of matching events.
          content:
            application/json:
              schema:
                type: object
                properties:
                  events:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: The ID of the event.
                        summary:
                          type: string
                          description: The summary or title of the event.
                        start:
                          type: string
                          format: date-time
                          description: The start time of the event.
                        end:
                          type: string
                          format: date-time
                          description: The end time of the event.
        "400":
          description: Invalid request (e.g., missing parameters or invalid format).
        "500":
          description: Server error or Google Calendar API error.
  /google-create-contacts-agent-action:
    post:
      summary: Cria um novo contato via agente de a√ß√£o
      operationId: createGoogleContacts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                contact:
                  type: object
                  properties:
                    names:
                      type: array
                      items:
                        type: object
                        properties:
                          givenName:
                            type: string
                          familyName:
                            type: string
                    emailAddresses:
                      type: array
                      items:
                        type: object
                        properties:
                          value:
                            type: string
                    phoneNumbers:
                      type: array
                      items:
                        type: object
                        properties:
                          value:
                            type: string
                    addresses:
                      type: array
                      items:
                        type: object
                        properties:
                          streetAddress:
                            type: string
                          city:
                            type: string
                          region:
                            type: string
                          postalCode:
                            type: string
                          country:
                            type: string
      responses:
        "200":
          description: Contato criado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        "400":
          description: Requisi√ß√£o inv√°lida
        "500":
          description: Erro interno do servidor
  /google-search-contacts-agent-action:
    get:
      operationId: getGoogleContacts
      summary: Fetch all Google Contacts
      description: Retrieve all contacts from the authenticated Google account, including names, email addresses, and phone numbers.
      parameters:
        - in: query
          name: query
          schema:
            type: string
          required: true
          description: The keyword to search for in event summaries.
      responses:
        "200":
          description: A list of contacts retrieved successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  contacts:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: The display name of the contact.
                          example: John Doe
                        email:
                          type: string
                          description: The primary email address of the contact.
                          example: john.doe@example.com
                        phone:
                          type: string
                          description: The primary phone number of the contact.
                          example: "+1234567890"
        "500":
          description: Internal server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Failed to fetch contacts due to an API error.
  /send-email-agent-action:
    post:
      operationId: sendEmail
      summary: Send an email
      description: Endpoint to send an email with specified attributes.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                to:
                  type: string
                  description: The recipient's email address.
                  example: recipient@example.com
                subject:
                  type: string
                  description: The subject of the email.
                  example: Meeting Reminder
                text:
                  type: string
                  description: The plain text content of the email.
                  example: This is a reminder for our meeting tomorrow.
                html:
                  type: string
                  description: The HTML content of the email.
                  example: <p>This is a <strong>reminder</strong> for our meeting tomorrow.</p>
      responses:
        "200":
          description: Email sent successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Confirmation message.
                    example: Email has been sent successfully.
  /file-upload-agent-action:
    options:
      operationId: uploadFileToS3Options
      summary: CORS preflight for file upload endpoint
      description: Handle CORS preflight requests for file upload.
      responses:
        "200":
          description: CORS preflight response
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET,POST,PUT,DELETE,OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: CORS preflight response
    post:
      operationId: uploadFileToS3
      summary: Upload file to S3 and serve as static content
      description: Endpoint to upload files to S3 bucket and serve them as static website content. HTML files are saved as index.html for website hosting.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fileName:
                  type: string
                  description: The name of the file to upload (optional - will be auto-generated if not provided).
                  example: my-website.html
                fileContent:
                  type: string
                  description: The file content encoded in base64 or as plain text.
                  example: PGh0bWw+PGhlYWQ+PHRpdGxlPk15IFNpdGU8L3RpdGxlPjwvaGVhZD48Ym9keT48aDE+SGVsbG8gV29ybGQhPC9oMT48L2JvZHk+PC9odG1sPg==
                content:
                  type: string
                  description: Alternative to fileContent - accepts plain text content.
                  example: "Hello World! This is my text file content."
                html:
                  type: string
                  description: Direct HTML content (automatically sets fileName to index.html if not provided).
                  example: "<html><head><title>My Site</title></head><body><h1>Hello World!</h1></body></html>"
                contentType:
                  type: string
                  description: MIME type of the file (optional - auto-detected from extension).
                  example: text/html
              required:
                - fileContent
              anyOf:
                - required: [fileContent]
                - required: [content] 
                - required: [html]
      responses:
        "200":
          description: File uploaded successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Success message.
                    example: File uploaded successfully
                  data:
                    type: object
                    description: Detailed information about the uploaded file.
                    properties:
                      originalFileName:
                        type: string
                        description: The original name of the uploaded file.
                        example: my-website.html
                      finalFileName:
                        type: string
                        description: The final name used to save the file.
                        example: index.html
                      s3Key:
                        type: string
                        description: The key used to store the file in S3.
                        example: index.html
                      publicUrl:
                        type: string
                        description: Public URL to access the file directly from S3.
                        example: https://chatgpt-actions-file-uploads.s3.amazonaws.com/index.html
                      s3Url:
                        type: string
                        description: S3 protocol URL for the file.
                        example: s3://chatgpt-actions-file-uploads/index.html
                      websiteUrl:
                        type: string
                        description: Website URL to access the file through S3 static hosting.
                        example: http://chatgpt-actions-file-uploads.s3-website-us-east-1.amazonaws.com/index.html
                      contentType:
                        type: string
                        description: MIME type of the uploaded file.
                        example: text/html
                      size:
                        type: integer
                        description: Size of the file in bytes.
                        example: 1024
                      uploadedAt:
                        type: string
                        format: date-time
                        description: Timestamp when the file was uploaded.
                        example: 2024-11-08T12:30:00.000Z
                      traceId:
                        type: string
                        description: Unique trace ID for debugging purposes.
                        example: trace-1699454400000
                      isWebsiteFile:
                        type: boolean
                        description: Whether the file is treated as a website index file.
                        example: true
                      isBase64Input:
                        type: boolean
                        description: Whether the input was provided as base64 or plain text.
                        example: false
                      quickAccess:
                        type: object
                        description: Quick access URLs with descriptive labels.
                        properties:
                          "üìÑ View File":
                            type: string
                            example: https://chatgpt-actions-file-uploads.s3.amazonaws.com/index.html
                          "üåê Website":
                            type: string
                            example: http://chatgpt-actions-file-uploads.s3-website-us-east-1.amazonaws.com/index.html
                          "üíæ Download":
                            type: string
                            example: https://chatgpt-actions-file-uploads.s3.amazonaws.com/index.html
        "400":
          description: Bad Request - Missing required parameters or invalid content.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Missing required fields
                  message:
                    type: string
                    example: fileContent, content, or html is required
                  examples:
                    type: object
                    description: Usage examples for different input types
                    properties:
                      "HTML direct":
                        type: object
                        example: {"html": "<html>...</html>", "fileName": "my-page.html"}
                      "Base64 file":
                        type: object  
                        example: {"fileName": "doc.pdf", "fileContent": "base64string"}
                      "Text content":
                        type: object
                        example: {"fileName": "notes.txt", "content": "My notes"}
        "500":
          description: Internal Server Error - Failed to upload file.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error type.
                    example: Internal server error
                  message:
                    type: string
                    description: Error message.
                    example: Failed to upload file to S3
                  details:
                    type: string
                    description: Detailed error information.
                    example: Access denied
